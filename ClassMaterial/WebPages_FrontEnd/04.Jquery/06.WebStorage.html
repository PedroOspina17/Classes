<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../Common/css/bootstrap.min.css">
    <title>Web Storage</title>
    <link rel="stylesheet" href="../Common/css/bootstrap.min.css">

    <link rel="stylesheet" href="../Common/css/rainbow.dreamweaver.css">
    <script src="../Common/js/rainbow-custom.min.js"></script>
    
</head>

<body>
    <div class="container">
        <h1>Web storage</h1>
        <p>
            There is a mechanism to storage information in the client side. This, similar as databases, is to allow to
            persist <b>(to avoid losing data)</b> when the browser tab or the web page is closed.
            there are two types of client storage:
        <ul>
            <li><b> session storage:</b> Store information until the window is closed</li>
            <li><b> local storage:</b> Store information until it is explicitly deleted (persisted even when the window is close.)</li>
        </ul>

        Both works almost in the same way, store a value based in a key <em>(Similar as Json "key": "Value")</em>. <br>
        
        Both have the same methods to work with:

        <ul>
            <li>
                <b>.getItem("key"):</b> This method allows you to get the value stored in the key specified in the parameter.
                <br>
                <em>Example:</em> The following code will obtain the information stored in the key
                "firstName"<code>localStorage.getItem("FirstName")</code>
            </li>
            <li>
                <b>.setItem("key","value"):</b> This method allows you to create a new entry and store the value or update the value of the key specified in the parameter. <br>
                <b>Note:</b> You need to know that <b>It only store <em>string</em> values</b>. 
                <em>Example:</em> The following code will create a new key called "MyKey" and saves the value "This is a value"
                <code>localStorage.setItem("MyKey","This is a value")</code><br>
                Since it only allows strings to storage information in Json format or lists you need to use the <code>JSON.stringify(VariableToConvert)</code> to convert a variable to string. <br>
                <b>Example: </b> To save in the local storage a json list variable called "myJsonList" in the key "PersonList" use: 
                <pre><code data-language="javascript">
            var myJsonList = [
                {
                    "name":"Pedro",
                    "lastName" : "Ospina"
                },
                {
                    "name":"David",
                    "lastName" : "Ossa"
                }
            ]
            localStorage.setItem("PersonList", JSON.stringify(myJsonList))</code></pre>
                
            </li>
            <li>
                <b>.key(indexPosition)</b>: This is to get the key stored in the position specified in the parameter.<br>
                <b> Example: </b> To get the key located in the index 2 use: <code>localStorage.ket(2)</code>
                <b>Remember:</b> Since the value stored in the local storage is a string, when the value is a list or a json you need to convert the value again to its type with the function <code>JSON.parse(ValueToParse)</code><br>
                <b>Example:</b> To get the value saved in the key "PersonList" (saved in the item before). you need to use:
                <pre><code data-language="javascript">
                var myJsonList = JSON.parse(localStorage.getItem("PersonList"))</code></pre>
            </li>
            <li>
                <b>.removeItem("key")</b> To delete the key with it's value. <br>
                <b>Example: </b> To delete the value stored in the key "MyKey" use: <code>localStorage.removeItem("MyKey")</code>
            </li>
            <li>
                <b>.clear()</b>: To Delete all the keys and values. To clear all the info. <code>localStorage.clear()</code>
            </li>
            <li>
                <b> localStorage.length: </b> To get how many keys have been saved. <code data-language="javascript">localStorage.length</code> returns an integer number. <br>
                <b> Note: </b>Using all the methods mentioned above you can iterate through the education 
        
            <pre ><code data-language="javascript">
            for (var i = 0; i < localStorage.length; i++){
            var key = localStorage.key(i);
            var value = localStorage.getItem(key);
            console.log(key, value);
            }</code></pre>

                
            </li>
        </ul>

        

        </p>
    </div>

    <div class="jumbotron container">

        <div class="row mb-4">
            <div class="col">
                <label for="lsKey">local storage key</label>
                <input type="text" name="lsKey" id="lsKey" class="form-control">                
            </div>
            <div class="col">
                <label for="lsValue">local storage value</label>
                <input type="text" name="lsValue" id="lsValue" class="form-control">                
            </div>
            <div class="col">
                <input type="button" id="btnCreateLocal" value="Create local value" class="btn btn-success h-75 mt-3 w-50" onclick="createLocalStorage()">
            </div>
            
        </div>

        <div class="row">
            <div class="col">
                <label for="ssKey">session storage key</label>
                <input type="text" name="ssKey" id="ssKey" class="form-control">                
            </div>
            <div class="col">
                <label for="ssValue">session storage value</label>
                <input type="text" name="ssValue" id="ssValue" class="form-control">                
            </div>
            <div class="col">
                <input type="button" id="btnCreateSession" value="Create session value" class="btn btn-success h-75 mt-3 w-50" onclick="createSessionStorage()" >
            </div>
            
        </div>
        <div class="row-col">
            <h3>Local storage</h3>
            <dl id="lsList"> 
                <dt></dt>
                <dl>test</dl>
            </dl>

            <div id="ssList">

            </div>

            <h3>Session storage</h3>
        </div>
    </div>
</body>

</html>